<app-menu></app-menu>
<div class="container-fluid" style="background-color: #080404; min-height: 100vh; padding: 50px;">
  <!-- Formulário de Filtro -->
  <form class="d-flex flex-column align-items-center mb-4">
    <div class="d-flex gap-3 mb-3 justify-content-center">
      <!-- Filtro por Data -->
      <div class="row mb-3">
        <label for="dataInicio" class="text-white">De</label>
        <input type="date" class="form-control text-white" [(ngModel)]="pruuSeletor.criadoEmInicio" name="dataCriacao"
          style="background-color: #202327; border-radius: 10px; width: 200px;" />
      </div>
      <div class="row mb-3">
        <label for="dataFim" class="text-white">Até</label>
        <input type="date" class="form-control text-white" [(ngModel)]="pruuSeletor.criadoEmFim" name="dataFim"
          style="background-color: #202327; border-radius: 10px; width: 200px;" />
      </div>

      <!-- Filtro por Usuário -->
      <div class="row mb-3">
        <label for="usuario" class="text-white">Usuário</label>
        <select class="form-control text-white" [(ngModel)]="pruuSeletor.idUsuario" name="usuario"
          style="background-color: #202327; border-radius: 10px; width: 200px;">
          <option *ngFor="let usuario of usuarios" [value]="usuario.id">{{ usuario.nome }}</option>
        </select>
      </div>

      <div class="row mb-3">
        <label for="usuario" class="text-white">Meus likes</label>
        <button (click)="pesquisarPruusQueOUsuarioCurtiu()">Meus</button>
      </div>
    </div>

    <!-- Botões -->
    <div class="d-flex gap-2 justify-content-center">
      <button type="button" class="btn btn-light" (click)="aplicarFiltros()" style="border-radius: 20px; width: 150px;">
        <i class="bi bi-search"></i> Buscar
      </button>
      <button type="button" class="btn btn-light" (click)="limparFiltros()" style="border-radius: 20px; width: 150px;">
        Limpar
      </button>
      <button class="btn btn-primary" [routerLink]="'/pruu/cadastrar'" style="border-radius: 20px; width: 120px;">
        Post
      </button>
    </div>
  </form>

  <h2 class="text-center mb-4 text-white">Meu Feed</h2>

  <!-- Feed de Posts -->
  <div class="d-flex flex-column align-items-center">
    <div *ngFor="let pruu of pruus" class="mb-4" style="width: 100%; max-width: 600px;">
      <!-- Post Esqueleto -->
      <div class="d-flex gap-3 p-3" style="background-color: #202327; border-radius: 10px;">
        <!-- Conteúdo -->
        <div style="flex-grow: 1;">
          <!-- Cabeçalho -->
          <div class="d-flex justify-content-between align-items-center">
            <!-- Imagem de Perfil -->
            <div class="d-flex align-items-center gap-2">
              <img *ngIf="pruu.usuario.fotoDePerfil" [src]="'data:image/jpeg;base64,' + pruu.usuario.fotoDePerfil"
                alt="Foto de {{ pruu.usuario.nome }}" class="rounded-circle"
                style="width: 50px; height: 50px; object-fit: cover;" />
              <strong class="text-white">{{ pruu.usuario.nome }}</strong>
            </div>
            <!-- Data Criada -->
            <span class="text-white" style="font-size: 0.85rem;">{{ pruu.criadoEm | date:'dd/MM/yyyy' }}</span>
          </div>

          <!-- Texto -->
          <p class="text-white mt-2 mb-2">{{ pruu.texto }}</p>

          <!-- Imagem (se existir) -->
          <img *ngIf="pruu.imagem" [src]="pruu.imagem" alt="Imagem do Post" class="img-fluid rounded"
            style="max-height: 300px; object-fit: cover; width: 100%;" />

          <!-- Ações -->
          <div class="d-flex align-items-center gap-1 mt-3 text-muted">
            <!-- Curtir -->
            <span class="text-white d-flex align-items-center like-button" [class.liked]="pruu.curtido"
              (click)="curtir(pruu)">
              <i class="bi" [ngClass]="pruu.curtido ? 'bi-heart-fill' : 'bi-heart'"></i>
              <span class="ms-1">{{ pruu.quantidadeCurtidas }}</span>
            </span>

            <!-- Botão Likes -->
            <button type="button" class="btn btn-link p-0 text-white" (click)="usuariosQueCurtiram(pruu)"
              style="text-decoration: underline; margin-left: -2px;">
                 likes
            </button>
          </div>
          <div class="align-items-center gap-1 mt-3 text-muted">
            <!-- Botão Denunciar -->
            <!-- <button type="button" class="btn btn-link p-0 text-white" (click)="denunciar(pruu)"
              style="text-decoration: underline; margin-left: -2px;">
                 bolinha
            </button> -->
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
